######### DC #################
{
	"s_aun_codigo": "(1)",
	"s_pobj_codigo": "(1365,1366,1603,1604,1608,1654)"
	"s_cac_codigo": "(1,3)"
}

{
	"s_aun_codigo": "(1)",
	"s_pobj_codigo": "(1365,1366)"
	"s_cac_codigo": "(2)"
}


DC ROLES
		SIN IDENTIFICAR	FORMULADOR 	EDICION
	3457029	RAFAEL MARTIN PORCEL DE LA BARRA	SUPERVISOR 	EDICION
	2468864	NORA HERMINIA MAMANI CABRERA	FORMULADOR 	EDICION
	2468864	NORA HERMINIA MAMANI CABRERA	FORMULADOR GERENTE 	EDICION
	2468864	NORA HERMINIA MAMANI CABRERA	SUPERVISOR 	EDICION
	2468864	NORA HERMINIA MAMANI CABRERA	APROBADOR 	EDICION
	2573781	ERIKA CAROLINA CARDENAS SALAS	FORMULADOR 	EDICION
	4755293	NORKA VALERIA CHAVEZ LIMACHI	FORMULADOR 	EDICION 

Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJwZXJfY29kaWdvIjoxOTE0LCJzaXN0ZW1hcyI6W3sic2lzY2dlX2NvZGlnbyI6MjUsInNpc2NnZV9zaWdsYSI6InVhaSJ9LHsic2lzY2dlX2NvZGlnbyI6MjksInNpc2NnZV9zaWdsYSI6InBvYWkifSx7InNpc2NnZV9jb2RpZ28iOjMyLCJzaXNjZ2Vfc2lnbGEiOiJjb3JyZXNwb25kZW5jaWFfaW50ZXJuYSJ9LHsic2lzY2dlX2NvZGlnbyI6MzQsInNpc2NnZV9zaWdsYSI6InNpc3BvYSJ9LHsic2lzY2dlX2NvZGlnbyI6MzUsInNpc2NnZV9zaWdsYSI6ImZpX2NvbmF1ZCJ9LHsic2lzY2dlX2NvZGlnbyI6MzcsInNpc2NnZV9zaWdsYSI6ImNvbmF1ZCJ9XSwicm9sZXMiOlt7InNpc2NnZV9jb2RpZ28iOjI1LCJyb2xfY29kaWdvIjoxNTAsInJvbF9kZXNjcmlwY2lvbiI6IlJFVklTT1IgVUFJIn0seyJzaXNjZ2VfY29kaWdvIjoyOSwicm9sX2NvZGlnbyI6MTU4LCJyb2xfZGVzY3JpcGNpb24iOiJST0wgU1VQRVJWSVNJT04ifSx7InNpc2NnZV9jb2RpZ28iOjI5LCJyb2xfY29kaWdvIjoxNTcsInJvbF9kZXNjcmlwY2lvbiI6IlJPTCBSRUdJU1RSTyBSRUNVUlNPUyBIVU1BTk9TIn0seyJzaXNjZ2VfY29kaWdvIjoyOSwicm9sX2NvZGlnbyI6MTU2LCJyb2xfZGVzY3JpcGNpb24iOiJBRE1JTklTVFJBRE9SIFBPQUkifSx7InNpc2NnZV9jb2RpZ28iOjI5LCJyb2xfY29kaWdvIjoxNzMsInJvbF9kZXNjcmlwY2lvbiI6IlJPTCBQTEFOSUZJQ0FDScOTTiJ9LHsic2lzY2dlX2NvZGlnbyI6MzUsInJvbF9jb2RpZ28iOjE5Miwicm9sX2Rlc2NyaXBjaW9uIjoiVkFMSURBRE9SIn0seyJzaXNjZ2VfY29kaWdvIjozNCwicm9sX2NvZGlnbyI6MTk2LCJyb2xfZGVzY3JpcGNpb24iOiJHZXN0acOzbiBJbnN0aXR1Y2lvbmFsIn0seyJzaXNjZ2VfY29kaWdvIjozNCwicm9sX2NvZGlnbyI6MTkwLCJyb2xfZGVzY3JpcGNpb24iOiJPcGVyYWRvciBGb3JtdWxhcmlvIn0seyJzaXNjZ2VfY29kaWdvIjozNywicm9sX2NvZGlnbyI6MjAyLCJyb2xfZGVzY3JpcGNpb24iOiJBZG1pbmlzdHJhZG9yIENPTkFVRCJ9LHsic2lzY2dlX2NvZGlnbyI6MzcsInJvbF9jb2RpZ28iOjIwOCwicm9sX2Rlc2NyaXBjaW9uIjoiT3BlcmFkb3IgRm9ybXVsYXJpbyJ9LHsic2lzY2dlX2NvZGlnbyI6MzIsInJvbF9jb2RpZ28iOjE3NSwicm9sX2Rlc2NyaXBjaW9uIjoiRlVOQ0lPTkFSSU8ifSx7InNpc2NnZV9jb2RpZ28iOjM3LCJyb2xfY29kaWdvIjoyMTksInJvbF9kZXNjcmlwY2lvbiI6IkFwb3lvIn0seyJzaXNjZ2VfY29kaWdvIjozNywicm9sX2NvZGlnbyI6MjA5LCJyb2xfZGVzY3JpcGNpb24iOiJHZXN0acOzbiBJbnN0aXR1Y2lvbmFsIn0seyJzaXNjZ2VfY29kaWdvIjozNCwicm9sX2NvZGlnbyI6MTk4LCJyb2xfZGVzY3JpcGNpb24iOiJWZXJpZmljYWRvciBGb3JtdWxhcmlvIn0seyJzaXNjZ2VfY29kaWdvIjozNCwicm9sX2NvZGlnbyI6MTk3LCJyb2xfZGVzY3JpcGNpb24iOiJHZXN0acOzbiBJbnN0aXR1Y2lvbmFsIEFwcm9iYWRvciJ9LHsic2lzY2dlX2NvZGlnbyI6MzcsInJvbF9jb2RpZ28iOjIxMSwicm9sX2Rlc2NyaXBjaW9uIjoiVmVyaWZpY2Fkb3IgRm9ybXVsYXJpbyJ9XSwiaWQiOiI4NDg1NWJkNS04ZDQzLTQwZTEtOGE2ZC01OTgxOTA1NmJiOTEiLCJ0aXBvIjoidXN1YXJpbyIsImlhdCI6MTcyNjUyNTQ3OSwiZXhwIjoxNzI2NTU0Mjc5LCJtb21lbnQiOiIyMDI0LTA5LTE2VDE4OjI0OjM5LTA0OjAwIn0.k-P11eZLcEfu49DxNURPa78FiatCPQ5Bm3MsC-mxiGD50Awuu44yhc4l4Pa368OjASBeuf5A9Pi9yQqZcY4Flw

backup_20240916_184400.sql


cac_codigo	pobj_codigo
1		1604
1		1608
1		1365
1		1366
1		1603
1		1654

2		1365
2		1366


po.pobj_codigo, pr.pro_numero, po.pobj_numero, po.pobj_nombre, au.aun_numero, au2.aun_numero





        SELECT
              po.pobj_codigo, po.pobj_estado, pr.pro_numero, au.aun_numero, po.pobj_numero,
              (CASE WHEN po.aun_codigo_padre IS NOT NULL
              THEN CONCAT(pr.pro_numero, '.', au2.aun_numero, '.', po.pobj_numero)
              ELSE CONCAT(pr.pro_numero, '.', au.aun_numero, '.', po.pobj_numero)  END) AS pobj_codigo_sigla,
              po.pobj_nombre, po.pro_codigo
        FROM	estructura_poa.poas_objetivos po
              LEFT JOIN pei.programas pr ON po.pro_codigo = pr.pro_codigo
              LEFT JOIN estructura_poa.objetivos_area_unidad oau ON po.pobj_codigo = oau.pobj_codigo AND oau.oau_estado NOT IN (0)
              LEFT JOIN estructura_organizacional.areas_unidades au ON oau.aun_codigo_ejecutora = au.aun_codigo
              LEFT JOIN estructura_organizacional.areas_unidades au2 ON po.aun_codigo_padre = au2.aun_codigo
        WHERE	TRUE
              ${query.poa_codigo ? `AND po.poa_codigo IN ${query.poa_codigo}` : ''} -- POA-SELECCIONADO
              ${query.pobj_estado ? `AND po.pobj_estado IN ${query.pobj_estado}` : ''} -- ESTADOS
              ${query.pobj_estado ? `AND oau.oau_estado IN ${query.pobj_estado}` : ''} -- ESTADOS
              ${query.aun_codigo ? `AND oau.aun_codigo_ejecutora IN ${query.aun_codigo}` : ''} -- UNIDAD-EJECUTORA
        GROUP BY po.pobj_codigo, pr.pro_numero, po.pobj_numero, po.pobj_nombre, au.aun_numero, au2.aun_numero

    
(19)
(1,3)        
(956,971,980,1022,1027,1091,1103,1113,1122,1126,1132,1142,1169,1422,1435,1556)
        
        
    @LoggerMethod//
  async obtenerAccionCortoPlazo(query: GetAllExcel, manager: EntityManager) {
    try {
      const sql = `
            SELECT 	po.pobj_codigo,pr.pro_numero,po.pobj_nombre, po.pobj_indicador, po.pobj_numero, oau.aun_codigo_ejecutora,
            		    (CASE WHEN po.aun_codigo_padre IS NOT NULL
              		  THEN CONCAT(pr.pro_numero, '.', au2.aun_numero, '.', po.pobj_numero)
              		  ELSE CONCAT(pr.pro_numero, '.', au.aun_numero, '.', po.pobj_numero)  END) AS poa_pobj_oau_act_codigo
            FROM 	  estructura_poa.poas_objetivos po
                    LEFT JOIN estructura_poa.objetivos_area_unidad oau ON po.pobj_codigo = oau.pobj_codigo
                    LEFT JOIN estructura_organizacional.areas_unidades au ON oau.aun_codigo_ejecutora = au.aun_codigo
                    LEFT JOIN estructura_organizacional.areas_unidades au2 ON po.aun_codigo_padre = au2.aun_codigo
                    LEFT JOIN pei.programas pr on po.pro_codigo = pr.pro_codigo
            WHERE   TRUE
                    AND po.pobj_codigo IN ${query.pobj_codigo}
      `;
      const resultAccion = await manager.query(sql);
      return resultAccion;
    } catch (error) {
      throwError(400, error.message);
    }
  }
  
################################################
REPORTE AREA UNIDAD/ACCIONES ESTRATEGICAS/ACTIVIDAD

Reporte: SE MODIFICO
---------------------
RptXlsAccionesAct.jasper.jrxml

Sub Reportes: SE MODIFICO
---------------------

Inputs: SE AGREGO
------
s_cac_codigo: /Data_Source/Input_Control/sispoa/s_cac_codigo (NUEVO)
s_poa_codigo: /Data_Source/Input_Control/sispoa/s_poa_codigo (NUEVO)

Logotipo Institucional: NO SE MODIFICO
################################################


################################################
REPORTE ACTIVIDADES HORAS

Reporte y Subreportes
---------------------
RptXlsAccionesAct.jrxml
SrptXlsAccionesAct.jrxml

Inputs
------
s_aun_codigo: /Data_Source/Input_Control/sispoa/s_aun_codigo (NUEVO)
s_pobj_codigo: /Data_Source/Input_Control/sispoa/s_pobj_codigo (NUEVO)
s_token: /Data_Source/Input_Control/sispoa/s_token

Logotipo Institucional: Images/logoCge2024.png
################################################
